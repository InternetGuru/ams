#!/usr/bin/env bash

declare -r IOTEST_FOLDER="${WORKING_DIR}/iotest"

if [[ -d "${IOTEST_FOLDER}" ]]; then
  declare -r IOTEST_LOG="${RESULTS}/iotest.log"
  generate_badge 'IO Tests' '0/0'
  printf -- '' > "${IOTEST_LOG}"
fi

if compgen -G "${WORKING_DIR}/*Test*.java" >/dev/null; then
  declare -r JUNIT_LOG="${RESULTS}/junit.log"
  generate_badge 'JUnit Tests' '0/0'
  printf -- '' > "${JUNIT_LOG}"
  declare -r JUNIT_FILE="${ACADEMY_CACHE}/junit.jar"
  [[ -f "${JUNIT_FILE}" ]] \
    || curl -sL "https://repo1.maven.org/maven2/org/junit/platform/junit-platform-console-standalone/1.9.2/junit-platform-console-standalone-1.9.2.jar" > "${JUNIT_FILE}"
fi

generate_badge 'Code Style' 'n/a'
# shellcheck disable=SC2034
declare -r CHECKSTYLE_LOG="${RESULTS}/checkstyle.log"
declare -r CHECKSTYLE_VERION="10.7.0"
declare -r CHECKSTYLE_FILE="${ACADEMY_CACHE}/checkstyle.jar"
[[ -f "${CHECKSTYLE_FILE}" ]] \
  || curl -sL "https://github.com/checkstyle/checkstyle/releases/download/checkstyle-${CHECKSTYLE_VERION}/checkstyle-10.7.0-all.jar" > "${CHECKSTYLE_FILE}"
