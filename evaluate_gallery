#!/bin/bash

file_patterns=(
    '[01][0-9]-*/render[123].jpg'
    '[01][0-9]-*/video.mp4'
    'showreel/video.mp4'
)

# Přidat nadpis pro studenta
printf '%s\n\n' "## ${user_name}" >> "${readme}"

# Přidat studentské soubory do galerie
for filepath in ${file_patterns[@]}; do
    mkdir -p "${local_gallery}/${user_name}/${filepath%/*}"
    cp "${filepath}" "${local_gallery}/${user_name}/${filepath}"
    printf '![%s](%s){width=15%%}\n' "${filepath##*/}" "${user_name}/${filepath}" >> "${readme}"
done

printf '\n\n' >> "${readme}"

# Add-commit-push galerii
git -C "${local_gallery}" remote -v
git -C "${local_gallery}" add .
git -C "${local_gallery}" commit -m "Update gallery for user '${user_name}'"
git -C "${local_gallery}" push

# Clean-up
# rm -rf .